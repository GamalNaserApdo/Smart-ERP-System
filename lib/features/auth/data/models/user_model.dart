
import 'package:smart_erp/features/auth/domain/entities/user.dart';

/**
 * Ø¯Ù„ÙˆÙ‚ØªÙŠ Ù‡Ù†Ø±ÙˆØ­ Ù„Ù„Ù€ Data Layer. 
 * Ù…Ø­ØªØ§Ø¬ÙŠÙ† Ù†Ø¹Ù…Ù„ UserModel 
 * Ø¨ÙŠÙˆØ±Ø« Ù…Ù† User Ø¨Ø³ Ø¨ÙŠØ¹Ø±Ù ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹
 *  Ø§Ù„Ù€ JSON 
 * (Ø¹Ø´Ø§Ù† Ù„Ù…Ø§ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ±Ø¯ Ø¹Ù„ÙŠÙ†Ø§).
 */

// pawres leeh? men el user 3ashan ykon 3andy ebn a3rf ap3to fe ay makan 
// talep user yane ned7ak 3la el domain we 7tkplo 3ady 
class UserModel extends User {
  // pa3mel const 3and kol constractor 3ashan el object da ykon sapet 
  // fe el zakara we da pysan el tatapek 
  const UserModel({
    required super.id,
    required super.name,
    required super.email,
    required super.role,
    required super.token,
  });

  // factory da type from constarcors pasta5demo law 3aez a3el taghez kapl 
  // ma arga3 el obejct 
  // Map<String , dynamic>  // da shakl el data e gaya men el elserver 
  factory UserModel.fromJson(Map<String , dynamic>json){
    // pnpda2  nmla2 el payanat hena 3shan ne7wel el json el gay men el net 
    // le opject a3rf asta5demo fe el tatpek 
    return UserModel(
      id: json['id'] ?? "",
      name: json['name']?? "unKnown User",
      email: json['email'] ?? "",
      role: json['role'] ?? "Viwer",
      token: json['token']?? "",
    );
  }


}


// Ø¹ÙŠÙ†ÙŠ Ù„ÙŠÙƒ ÙŠØ§ Ù‡Ù†Ø¯Ø³Ø©! ğŸ¤© ØªØ¹Ø§Ù„ Ù†ÙÙƒÙƒ "Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ" Ø¯Ù‡ ÙˆÙ†Ø­ÙˆÙ„Ù‡ Ù„Ù…Ø´Ù‡Ø¯ ØªÙ…Ø«ÙŠÙ„ÙŠ ÙƒØ§Ù…Ù„ Ø¹Ø´Ø§Ù† ØªØ´ÙˆÙ Ø§Ù„Ø±Ø­Ù„Ø© Ø¨ØªÙ…Ø´ÙŠ Ø¥Ø²Ø§ÙŠ Ù…Ù† Ø£ÙˆÙ„ Ù…Ø§ ØµØ¨Ø§Ø¹Ùƒ ÙŠÙ„Ù…Ø³ Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ø­Ø¯ Ù…Ø§ Ø§Ù„Ø¯Ø§ØªØ§ ØªØ±Ø¬Ø¹.

// ØªØ®ÙŠÙ„ Ø¥Ù†Ù†Ø§ ÙÙŠ Ù…Ø·Ø¹Ù… ÙØ®Ù… Ø¬Ø¯Ù‹Ø§ (Ø¯Ù‡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨ØªØ§Ø¹Ù†Ø§).

// Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆØ§Ù„ÙˆÙŠØªØ± (Cubit) ğŸ¤µâ€â™‚ï¸
// Ø§Ù„Ø³Ø·Ø±: Cubit: Ø¨ÙŠÙ†Ø§Ø¯ÙŠ loginUseCase.call(email, pass)

// Ù…ÙŠÙ† Ø§Ù„Ù€ CubitØŸ Ø¯Ù‡ "Ø§Ù„ÙˆÙŠØªØ±" (Waiter) Ø§Ù„ÙˆØ§Ù‚Ù ÙÙŠ Ø§Ù„ØµØ§Ù„Ø©.

// Ø¥ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ø­ØµÙ„ØŸ

// Ø§Ù„Ù…Ø¯ÙŠØ± (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) Ø¯Ø§Ø³ Ø¹Ù„Ù‰ Ø²Ø±Ø§Ø± "Ø¯Ø®ÙˆÙ„" ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø©.

// Ø§Ù„ÙˆÙŠØªØ± (Cubit) Ø´Ø§Ù Ø§Ù„Ø²Ø±Ø§Ø± Ø§Ù†Ø¯Ø§Ø³.

// Ø§Ù„ÙˆÙŠØªØ± Ù†Ø§Ø¯Ù‰ Ø¨ØµÙˆØª Ø¹Ø§Ù„ÙŠ: "ÙŠØ§ Ù…Ø·Ø¨Ø® (UseCase)! ÙÙŠ Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø¯ÙˆÙ„".

// ÙÙŠ Ø§Ù„Ù„Ø­Ø¸Ø© Ø¯ÙŠØŒ Ø§Ù„ÙˆÙŠØªØ± Ù‚Ø§Ù„ Ù„Ù„Ø²Ø¨Ø§Ø¦Ù† (Ø§Ù„Ø´Ø§Ø´Ø©): "Ø«ÙˆØ§Ù†ÙŠ ÙŠØ§ ÙÙ†Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¨ÙŠØ¬Ù‡Ø²" -> emit(LoadingState). (Ø§Ù„Ø´Ø§Ø´Ø© Ø¨ØªÙ„Ù).

// Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø±Ø¦ÙŠØ³ Ø§Ù„Ø·Ù‡Ø§Ø© (UseCase) ğŸ‘¨â€ğŸ³
// Ø§Ù„Ø³Ø·Ø±: UseCase: Ø¨ÙŠØ§Ø®Ø¯ Ø§Ù„Ø·Ù„Ø¨ØŒ ÙˆÙŠØ¨Øµ Ù„Ù„Ù…ÙˆØ¸Ù Ø¨ØªØ§Ø¹Ù‡ (Repository) ÙˆÙŠÙ‚ÙˆÙ„Ù‡: "Ù†ÙØ° Ø§Ù„Ø¹Ù‚Ø¯ Ø¯Ù‡ ÙˆÙ‡Ø§ØªÙ„ÙŠ Ø§Ù„Ù†ØªÙŠØ¬Ø©"

// Ù…ÙŠÙ† Ø§Ù„Ù€ UseCaseØŸ Ø¯Ù‡ "Ø±Ø¦ÙŠØ³ Ø§Ù„Ø·Ù‡Ø§Ø©" (Head Chef).

// ÙˆØ¸ÙŠÙØªÙ‡: Ù‡Ùˆ Ù…Ø´ Ø¨ÙŠØ·Ø¨Ø® Ø¨Ø¥ÙŠØ¯Ù‡ ÙˆÙ„Ø§ Ø¨ÙŠÙ†Ø²Ù„ ÙŠØ´ØªØ±ÙŠ Ø·Ù„Ø¨Ø§Øª. Ù‡Ùˆ "Ø¥Ø¯Ø§Ø±ÙŠ".

// Ø¥ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ø­ØµÙ„ØŸ

// Ø³Ù…Ø¹ Ø§Ù„ÙˆÙŠØªØ± Ø¨ÙŠÙ†Ø§Ø¯ÙŠ.

// Ø¨Øµ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø¨ØªØ§Ø¹Ù‡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„ØªÙ…ÙˆÙŠÙ† (Ø§Ù„Ù€ Repository).

// Ù‚Ø§Ù„Ù‡: "ÙŠØ§ Ø±ÙŠØ¨ÙˆØ²ÙŠØªÙˆØ±ÙŠØŒ Ø¨Ù…ÙˆØ¬Ø¨ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù„ÙŠ Ø¨ÙŠÙ†Ø§ØŒ Ø±ÙˆØ­ Ù‡Ø§ØªÙ„ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¯Ù‡. Ø£Ù†Ø§ Ù…Ù„ÙŠØ´ Ø¯Ø¹ÙˆØ© Ù‡ØªØ¬ÙŠØ¨Ù‡Ø§ Ù…Ù† Ø§Ù„Ø³ÙˆÙ‚ (API) ÙˆÙ„Ø§ Ù…Ù† Ø§Ù„ØªÙ„Ø§Ø¬Ø© (Cache)ØŒ Ø§Ù„Ù…Ù‡Ù… Ù‡Ø§ØªÙ‡Ø§ ÙˆØªØ¹Ø§Ù„Ù‰".

// Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«: Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ† ÙˆØ§Ù„Ù…Ø®Ø§Ø²Ù† (Repository) ğŸ“¦
// Ø§Ù„Ø³Ø·Ø±: Repository: (Ù„Ø³Ù‡ Ù‡Ù†ÙƒØªØ¨Ù‡) Ø¨ÙŠØ§Ø®Ø¯ Ø§Ù„Ø·Ù„Ø¨ØŒ ÙŠØ±ÙˆØ­ Ù„Ù€ DataSource (Ø§Ù„Ù„ÙŠ Ø¹Ù…Ù„Ù†Ø§Ù‡ Mock)ØŒ ÙŠØ¬ÙŠØ¨ Ø§Ù„Ø¯Ø§ØªØ§ØŒ ÙŠØ­ÙˆÙ„Ù‡Ø§ØŒ ÙˆÙŠØ±Ø¬Ø¹Ù‡Ø§ ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚ Either

// Ù…ÙŠÙ† Ø§Ù„Ù€ RepositoryØŸ Ø¯Ù‡ "Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ†". Ø¯Ù‡ Ø§Ù„Ø´Ø®Øµ Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ù„ÙŠ ÙŠØ¹Ø±Ù Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø­Ø§Ø¬Ø©.

// Ø¥ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ø­ØµÙ„ØŸ

// Ø®Ø¯ Ø§Ù„Ø£Ù…Ø± Ù…Ù† Ø§Ù„Ø´ÙŠÙ.

// Ù‚Ø±Ø± ÙŠØ±ÙˆØ­ ÙŠØ¬ÙŠØ¨ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† "Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„ÙˆÙ‡Ù…ÙŠ" (MockDataSource) Ù„Ø£Ù†Ù†Ø§ Ù„Ø³Ù‡ Ù…Ø¹Ù†Ø¯Ù†Ø§Ø´ Ù…ÙˆØ±Ø¯ Ø­Ù‚ÙŠÙ‚ÙŠ.

// Ø§Ù„Ù€ DataSource (Ø§Ù„Ù…ÙˆØ±Ø¯): Ø±Ø¯ Ø¹Ù„ÙŠÙ‡ ÙˆØ§Ø¯Ø§Ù„Ù‡ ÙƒÙŠØ³ ÙÙŠÙ‡ Ù…ÙƒÙˆÙ†Ø§Øª Ø®Ø§Ù… (JSON / UserModel).

// Ø§Ù„Ù€ Repository (Ø§Ù„Ø°ÙƒØ§Ø¡ ÙƒÙ„Ù‡ Ù‡Ù†Ø§):

// ÙØªØ­ Ø§Ù„ÙƒÙŠØ³ Ø§Ù„Ø®Ø§Ù… (UserModel).

// Ù†Ø¶ÙÙ‡ ÙˆØ±ØªØ¨Ù‡ ÙˆØ­ÙˆÙ„Ù‡ Ù„Ø·Ø¨Ù‚ Ø¬Ø§Ù‡Ø² ÙˆÙ†Ø¸ÙŠÙ (User Entity).

// Ø£Ù‡Ù… Ù†Ù‚Ø·Ø©: Ø­Ø· Ø§Ù„Ø·Ø¨Ù‚ Ø¯Ù‡ Ø¬ÙˆÙ‡ ØµÙ†Ø¯ÙˆÙ‚ Ù…ØºÙ„Ù‚ Ø§Ø³Ù…Ù‡ Either.

// Ù„Ùˆ Ù„Ù‚Ù‰ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø¨Ø§ÙŠØ¸Ø©ØŸ Ø¨ÙŠØ­Ø· "Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£" (Failure) ÙÙŠ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ (Left).

// Ù„Ùˆ Ù„Ù‚Ù‰ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø³Ù„ÙŠÙ…Ø©ØŸ Ø¨ÙŠØ­Ø· "Ø§Ù„ÙŠÙˆØ²Ø±" (User) ÙÙŠ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„ÙŠÙ…ÙŠÙ† (Right).

// Ù‚ÙÙ„ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙˆØ±Ø¬Ø¹Ù‡ Ù„Ù„Ø´ÙŠÙ.

// Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø±Ø§Ø¨Ø¹: Ø§Ù„ØªØ³Ù„ÙŠÙ… (Return Trip) ğŸšš
// Ø§Ù„Ø³Ø·Ø±: UseCase: ÙŠØ³ØªÙ„Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙˆÙŠØ³Ù„Ù…Ù‡ Ù„Ù„Ù€ Cubit

// Ø¥ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ø­ØµÙ„ØŸ

// Ø§Ù„Ø´ÙŠÙ (UseCase): Ø§Ø³ØªÙ„Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ù‚ÙÙˆÙ„ Ù…Ù† Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ†. Ù…ÙØªØ­ÙˆØ´ ÙˆÙ„Ø§ Ø¨Øµ ÙÙŠÙ‡. Ù†Ø§Ø¯Ù‰ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙŠØªØ±: "Ø·Ù„Ø¨Ùƒ Ø¬Ø§Ù‡Ø² ÙŠØ§ ÙˆÙŠØªØ±!".

// Ø§Ù„ÙˆÙŠØªØ± (Cubit): Ø§Ø³ØªÙ„Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚.

// Ù„Ø­Ø¸Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© (ÙÙŠ ÙƒÙˆØ¯ Ø§Ù„Ù€ Cubit):

// Ø§Ù„ÙˆÙŠØªØ± Ø¨ÙŠÙØªØ­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ù„Ø© Ø§Ø³Ù…Ù‡Ø§ .fold).

// Ù„Ùˆ Ù„Ù‚Ù‰ ÙƒØ§Ø±Ø«Ø© (Left): Ø¨ÙŠØµØ±Ø® Ù„Ù„Ø´Ø§Ø´Ø© -> emit(ErrorState). (Ø§Ù„Ø´Ø§Ø´Ø© ØªØ·Ù„Ø¹ Ø±Ø³Ø§Ù„Ø© Ø­Ù…Ø±Ø§Ø¡).

// Ù„Ùˆ Ù„Ù‚Ù‰ ÙŠÙˆØ²Ø± (Right): Ø¨ÙŠØ¨ØªØ³Ù… Ù„Ù„Ø´Ø§Ø´Ø© -> emit(SuccessState). (Ø§Ù„Ø´Ø§Ø´Ø© ØªÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©).

// ğŸ’¡ Ø§Ù„Ø®Ù„Ø§ØµØ©: Ù„ÙŠÙ‡ Ø§Ù„Ù„ÙØ© Ø¯ÙŠ ÙƒÙ„Ù‡Ø§ØŸ
// Ø¹Ø´Ø§Ù† ÙƒÙ„ ÙˆØ§Ø­Ø¯ Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø­Ø§Ø¬Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø³:

// Cubit: Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø´ÙƒÙ„ Ø§Ù„Ø´Ø§Ø´Ø©.

// UseCase: Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ø£Ù…Ø± (Business Logic).

// Repository: Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ø¯Ø§ØªØ§ ÙˆÙ…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§.

// DataSource: Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ.

// Ù„Ùˆ Ø§Ù„Ù…ÙˆØ±Ø¯ (API) Ø§ØªØºÙŠØ±ØŒ Ø¨Ù†ØºÙŠØ± Ø¨Ø³ ÙÙŠ Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«ØŒ ÙˆØ¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø³Ø±Ø­ÙŠØ© Ø¨ØªÙØ¶Ù„ Ø´ØºØ§Ù„Ø© Ø²ÙŠ Ù…Ø§ Ù‡ÙŠ! ğŸ­âœ…